<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynasty League Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary-navy: #0A1929;
            --primary-dark: #132F4C;
            --primary-medium: #1E4A6B;
            --primary-light: #2A5F8F;
            --accent-emerald: #10B981;
            --accent-emerald-light: #34D399;
            --accent-emerald-dark: #059669;
            --accent-orange: #F97316;
            --bg-primary: #0F172A;
            --bg-secondary: #1E293B;
            --bg-tertiary: #334155;
            --bg-card: #1E293B;
            --bg-hover: #334155;
            --text-primary: #F1F5F9;
            --text-secondary: #CBD5E1;
            --text-tertiary: #94A3B8;
            --text-muted: #64748B;
            --border-color: #334155;
            --border-radius: 8px;
            --border-radius-lg: 12px;
            --spacing-xs: 4px;
            --spacing-sm: 8px;
            --spacing-md: 16px;
            --spacing-lg: 24px;
            --spacing-xl: 32px;
            --spacing-2xl: 48px;
        }
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            margin: 0;
            padding: 0;
            display: flex;
            min-height: 100vh;
        }
        .nav-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            background: var(--bg-card);
            border-right: 1px solid var(--border-color);
            transition: width 0.3s ease;
            z-index: 1000;
            overflow: hidden;
            width: 250px;
        }
        .nav-sidebar.collapsed {
            width: 60px;
        }
        .sidebar-toggle {
            width: 100%;
            padding: var(--spacing-md);
            background: transparent;
            border: none;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: var(--spacing-md);
            transition: background 0.2s;
        }
        .sidebar-toggle:hover {
            background: var(--bg-hover);
        }
        .sidebar-toggle-icon {
            font-size: 1.5rem;
            flex-shrink: 0;
        }
        .sidebar-toggle-text {
            white-space: nowrap;
            font-weight: 600;
        }
        .nav-sidebar.collapsed .sidebar-toggle-text {
            display: none;
        }
        .nav-links {
            padding: var(--spacing-md) 0;
        }
        .nav-link-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            padding: var(--spacing-md) var(--spacing-lg);
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }
        .nav-link-item:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
        }
        .nav-link-item.active {
            background: rgba(16, 185, 129, 0.1);
            color: var(--accent-emerald);
            border-left-color: var(--accent-emerald);
        }
        .nav-link-icon {
            font-size: 1.25rem;
            flex-shrink: 0;
            width: 24px;
            text-align: center;
        }
        .nav-link-text {
            white-space: nowrap;
            font-weight: 500;
        }
        .nav-sidebar.collapsed .nav-link-text {
            display: none;
        }
        .main-wrapper {
            flex: 1;
            margin-left: 250px;
            transition: margin-left 0.3s ease;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .nav-sidebar.collapsed ~ .main-wrapper {
            margin-left: 60px;
        }
        .top-header {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
            padding: var(--spacing-md) var(--spacing-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header-left {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }
        .header-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }
        .team-selector {
            position: relative;
        }
        .team-select-btn {
            padding: 8px 16px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            color: var(--text-primary);
            font-size: 0.875rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            min-width: 150px;
        }
        .team-select-btn:hover {
            background: var(--bg-hover);
        }
        .team-select-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: var(--spacing-xs);
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            min-width: 200px;
            max-height: 300px;
            overflow-y: auto;
            display: none;
            z-index: 100;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        .team-select-dropdown.show {
            display: block;
        }
        .team-option {
            padding: var(--spacing-sm) var(--spacing-md);
            cursor: pointer;
            transition: background 0.2s;
            color: var(--text-primary);
        }
        .team-option:hover {
            background: var(--bg-hover);
        }
        .team-option.selected {
            background: rgba(16, 185, 129, 0.2);
            color: var(--accent-emerald);
        }
        .content-area {
            flex: 1;
            padding: var(--spacing-lg);
            overflow-y: auto;
        }
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: var(--spacing-lg);
        }
        .main-content { display: flex; flex-direction: column; gap: var(--spacing-lg); }
        .sidebar { display: flex; flex-direction: column; gap: var(--spacing-lg); }
        .loading {
            text-align: center;
            padding: var(--spacing-xl);
            color: var(--text-secondary);
        }
        .error {
            background: rgba(239, 68, 68, 0.2);
            color: #F87171;
            padding: var(--spacing-md);
            border-radius: var(--border-radius);
            margin-bottom: var(--spacing-md);
        }
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
        }
        .league-title {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
        }
        .league-meta {
            display: flex;
            gap: var(--spacing-md);
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        .activity-feed {
            background: var(--bg-card);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-lg);
            border: 1px solid var(--border-color);
        }
        .feed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-md);
        }
        .activity-item {
            display: flex;
            gap: var(--spacing-md);
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
        }
        .activity-item:last-child { border-bottom: none; }
        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }
        .activity-icon.trade { background: rgba(249, 115, 22, 0.2); color: var(--accent-orange); }
        .activity-icon.waiver { background: rgba(99, 102, 241, 0.2); color: #818CF8; }
        .activity-icon.score { background: rgba(16, 185, 129, 0.2); color: var(--accent-emerald); }
        .activity-content {
            flex: 1;
        }
        .activity-title {
            font-weight: 600;
            margin-bottom: 4px;
        }
        .activity-details {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        .activity-time {
            font-size: 0.75rem;
            color: var(--text-muted);
        }
        .matchup-card {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-medium) 100%);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-lg);
            border: 1px solid var(--border-color);
        }
        .matchup-teams {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: var(--spacing-md);
            align-items: center;
        }
        .team-card {
            text-align: center;
        }
        .team-name {
            font-weight: 600;
            font-size: 1.125rem;
            margin-bottom: var(--spacing-xs);
        }
        .team-record {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: var(--spacing-sm);
        }
        .projected-score {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-emerald-light);
        }
        .vs-divider {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-tertiary);
        }
        .standings-card {
            background: var(--bg-card);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-lg);
            border: 1px solid var(--border-color);
        }
        .standings-table {
            width: 100%;
            border-collapse: collapse;
        }
        .standings-table th {
            text-align: left;
            padding: var(--spacing-sm) var(--spacing-md);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-tertiary);
            border-bottom: 1px solid var(--border-color);
        }
        .standings-table td {
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--border-color);
        }
        .standings-table tr:hover {
            background: var(--bg-hover);
        }
        .team-rank {
            font-weight: 700;
            color: var(--accent-emerald);
        }
        .draft-capital-card {
            background: var(--bg-card);
            border-radius: var(--border-radius-lg);
            padding: var(--spacing-lg);
            border: 1px solid var(--border-color);
        }
        .pick-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid var(--border-color);
        }
        .pick-item:last-child { border-bottom: none; }
        .pick-label {
            font-weight: 600;
        }
        .pick-round {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        .faab-display {
            margin-top: var(--spacing-md);
            padding-top: var(--spacing-md);
            border-top: 1px solid var(--border-color);
        }
        .faab-amount {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent-emerald);
        }
        .heading-3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: var(--spacing-md);
        }
        .body-small {
            font-size: 0.875rem;
        }
        @media (max-width: 768px) {
            .nav-sidebar {
                transform: translateX(-100%);
            }
            .nav-sidebar.mobile-open {
                transform: translateX(0);
            }
            .main-wrapper {
                margin-left: 0 !important;
            }
            .nav-sidebar {
                width: 250px;
            }
        }
    </style>
</head>
<body>
    <nav class="nav-sidebar" id="navSidebar">
        <button class="sidebar-toggle" onclick="toggleSidebar()">
            <span class="sidebar-toggle-icon">‚ò∞</span>
            <span class="sidebar-toggle-text">Menu</span>
        </button>
        <div class="nav-links">
            <a href="dashboard.html" class="nav-link-item active">
                <span class="nav-link-icon">üìä</span>
                <span class="nav-link-text">Dashboard</span>
            </a>
            <a href="roster.html" class="nav-link-item">
                <span class="nav-link-icon">üë•</span>
                <span class="nav-link-text">Roster</span>
            </a>
            <a href="trade.html" class="nav-link-item">
                <span class="nav-link-icon">ü§ù</span>
                <span class="nav-link-text">Trade Center</span>
            </a>
            <a href="draft.html" class="nav-link-item">
                <span class="nav-link-icon">üìã</span>
                <span class="nav-link-text">Draft Board</span>
            </a>
        </div>
    </nav>
    
    <div class="main-wrapper">
        <div class="top-header">
            <div class="header-left">
                <h1 class="league-title" id="leagueName" style="font-size: 1.5rem; margin: 0;">Loading...</h1>
                <div class="league-meta" id="leagueMeta"></div>
            </div>
            <div class="header-right">
                <div class="team-selector">
                    <button class="team-select-btn" onclick="toggleTeamSelector()">
                        <span id="selectedTeamName">Select Team</span>
                        <span>‚ñº</span>
                    </button>
                    <div class="team-select-dropdown" id="teamDropdown"></div>
                </div>
            </div>
        </div>
        
        <div class="content-area">
            <div class="dashboard-container">
                <div class="main-content">
                    <div class="dashboard-header" style="display: none;">
                        <div>
                            <h1 class="league-title" id="leagueNameOld">Loading...</h1>
                            <div class="league-meta" id="leagueMetaOld"></div>
                        </div>
                    </div>
            
            <div id="errorContainer"></div>
            
            <div class="activity-feed">
                <div class="feed-header">
                    <h2 class="heading-3">What's New</h2>
                </div>
                <div id="activityList" class="activity-list">
                    <div class="loading">Loading activity...</div>
                </div>
            </div>
            
            <div class="matchup-card">
                <div class="matchup-header">
                    <h2 class="heading-3">Upcoming Matchup</h2>
                    <span class="body-small" id="matchupWeek">Week -</span>
                </div>
                <div id="matchupContent" class="matchup-teams">
                    <div class="loading">Loading matchup...</div>
                </div>
            </div>
            
            <div class="standings-card">
                <h2 class="heading-3" style="margin-bottom: var(--spacing-md);">League Standings</h2>
                <div id="standingsContent">
                    <div class="loading">Loading standings...</div>
                </div>
            </div>
        </div>
        
        <div class="sidebar">
            <div class="draft-capital-card">
                <div class="capital-header">
                    <h3 class="heading-4">Draft Capital</h3>
                </div>
                <div id="draftCapitalContent">
                    <div class="loading">Loading draft picks...</div>
                </div>
            </div>
        </div>
    </div>

    <script src="sleeper-api.js"></script>
    <script>
        let currentUserId = null;
        let league = null;
        let allUsers = [];

        // Sidebar functionality
        function toggleSidebar() {
            const sidebar = document.getElementById('navSidebar');
            sidebar.classList.toggle('collapsed');
            localStorage.setItem('sidebarCollapsed', sidebar.classList.contains('collapsed'));
        }

        function initSidebar() {
            const sidebar = document.getElementById('navSidebar');
            const isCollapsed = localStorage.getItem('sidebarCollapsed') === 'true';
            if (isCollapsed) {
                sidebar.classList.add('collapsed');
            }
            
            // Set active page
            const currentPage = window.location.pathname.split('/').pop() || 'dashboard.html';
            document.querySelectorAll('.nav-link-item').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === currentPage) {
                    link.classList.add('active');
                }
            });
        }

        // Team selector functionality
        function toggleTeamSelector() {
            const dropdown = document.getElementById('teamDropdown');
            dropdown.classList.toggle('show');
        }

        async function loadTeamSelector() {
            try {
                allUsers = await sleeperAPI.getUsers();
                const dropdown = document.getElementById('teamDropdown');
                
                // Load saved team selection
                const savedUserId = localStorage.getItem('selectedUserId');
                if (savedUserId) {
                    currentUserId = savedUserId;
                } else {
                    currentUserId = allUsers[0]?.user_id;
                }

                dropdown.innerHTML = allUsers.map(user => {
                    const isSelected = user.user_id === currentUserId;
                    return `
                        <div class="team-option ${isSelected ? 'selected' : ''}" 
                             onclick="selectTeam('${user.user_id}')">
                            ${user.display_name || user.username || `Team ${user.user_id}`}
                        </div>
                    `;
                }).join('');

                updateSelectedTeamName();
            } catch (error) {
                console.error('Failed to load teams:', error);
            }
        }

        function selectTeam(userId) {
            currentUserId = userId;
            localStorage.setItem('selectedUserId', userId);
            updateSelectedTeamName();
            document.getElementById('teamDropdown').classList.remove('show');
            
            // Reload page data
            loadDashboard();
        }

        function updateSelectedTeamName() {
            const user = allUsers.find(u => u.user_id === currentUserId);
            const teamName = user?.display_name || user?.username || 'Select Team';
            document.getElementById('selectedTeamName').textContent = teamName;
            
            // Update dropdown selected state
            document.querySelectorAll('.team-option').forEach(option => {
                option.classList.remove('selected');
                if (option.textContent.trim() === teamName) {
                    option.classList.add('selected');
                }
            });
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const selector = document.querySelector('.team-selector');
            if (selector && !selector.contains(event.target)) {
                document.getElementById('teamDropdown').classList.remove('show');
            }
        });

        async function loadDashboard() {
            try {
                league = await sleeperAPI.getLeague();
                document.getElementById('leagueName').textContent = league.name || 'Dynasty League';
                document.getElementById('leagueMeta').innerHTML = `
                    <span>${league.total_rosters || 12} Teams</span>
                    <span>‚Ä¢</span>
                    <span>${league.settings.type === 1 ? 'Redraft' : 'Dynasty'}</span>
                    <span>‚Ä¢</span>
                    <span>Week ${league.settings.leg || league.settings.start_week || 1}</span>
                `;

                if (!currentUserId) {
                    const users = await sleeperAPI.getUsers();
                    const savedUserId = localStorage.getItem('selectedUserId');
                    currentUserId = savedUserId || users[0]?.user_id;
                }

                await Promise.all([
                    loadActivityFeed(),
                    loadMatchup(),
                    loadStandings(),
                    loadDraftCapital()
                ]);
            } catch (error) {
                showError('Failed to load dashboard data: ' + error.message);
            }
        }

        async function loadActivityFeed() {
            try {
                const activities = await sleeperAPI.getRecentActivity(10);
                const users = await sleeperAPI.getUsers();
                const userMap = {};
                users.forEach(u => userMap[u.user_id] = u);

                const activityList = document.getElementById('activityList');
                if (activities.length === 0) {
                    activityList.innerHTML = '<div class="activity-item">No recent activity</div>';
                    return;
                }

                activityList.innerHTML = activities.map(trans => {
                    const type = trans.type;
                    let icon = 'score';
                    let title = 'Transaction';
                    let details = '';

                    if (type === 'trade') {
                        icon = 'trade';
                        title = 'Trade Completed';
                        details = `Trade between teams`;
                    } else if (type === 'waiver' || type === 'free_agent') {
                        icon = 'waiver';
                        title = type === 'waiver' ? 'Waiver Claim' : 'Free Agent Add';
                        const team = users.find(u => trans.roster_ids?.includes(u.user_id));
                        details = `${team?.display_name || 'Team'} made a ${type} move`;
                    } else {
                        details = 'Transaction processed';
                    }

                    const date = new Date(trans.status_updated || trans.created);
                    const timeAgo = getTimeAgo(date);

                    return `
                        <div class="activity-item">
                            <div class="activity-icon ${icon}">${icon[0].toUpperCase()}</div>
                            <div class="activity-content">
                                <div class="activity-title">${title}</div>
                                <div class="activity-details">${details}</div>
                                <div class="activity-time">${timeAgo}</div>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                document.getElementById('activityList').innerHTML = 
                    '<div class="error">Failed to load activity</div>';
            }
        }

        async function loadMatchup() {
            try {
                if (!currentUserId) return;
                
                const matchup = await sleeperAPI.getUpcomingMatchup(currentUserId);
                const users = await sleeperAPI.getUsers();
                const userMap = {};
                users.forEach(u => userMap[u.user_id] = u);

                const matchupContent = document.getElementById('matchupContent');
                const matchupWeek = document.getElementById('matchupWeek');
                
                if (!matchup) {
                    matchupContent.innerHTML = '<div>No matchup found</div>';
                    return;
                }

                matchupWeek.textContent = `Week ${matchup.week}`;

                const userRoster = await sleeperAPI.getUserRoster(currentUserId);
                const user = userMap[currentUserId];
                const userScore = (matchup.userMatchup.points || 0).toFixed(1);

                let opponentInfo = { name: 'TBD', score: '0.0', record: '0-0' };
                if (matchup.opponentMatchup) {
                    const rosters = await sleeperAPI.getRosters();
                    const opponent = rosters.find(r => r.roster_id === matchup.opponentMatchup.roster_id);
                    if (opponent) {
                        const opponentUser = userMap[opponent.owner_id];
                        opponentInfo = {
                            name: opponentUser?.display_name || opponentUser?.username || 'Opponent',
                            score: (matchup.opponentMatchup.points || 0).toFixed(1),
                            record: `${opponent.settings.wins || 0}-${opponent.settings.losses || 0}`
                        };
                    }
                }

                matchupContent.innerHTML = `
                    <div class="team-card">
                        <div class="team-name">${user?.display_name || user?.username || 'Your Team'}</div>
                        <div class="team-record">${userRoster?.settings.wins || 0}-${userRoster?.settings.losses || 0}</div>
                        <div class="projected-score">${userScore}</div>
                    </div>
                    <div class="vs-divider">VS</div>
                    <div class="team-card">
                        <div class="team-name">${opponentInfo.name}</div>
                        <div class="team-record">${opponentInfo.record}</div>
                        <div class="projected-score">${opponentInfo.score}</div>
                    </div>
                `;
            } catch (error) {
                document.getElementById('matchupContent').innerHTML = 
                    '<div class="error">Failed to load matchup</div>';
            }
        }

        async function loadStandings() {
            try {
                const standings = await sleeperAPI.getStandings();
                const standingsContent = document.getElementById('standingsContent');

                standingsContent.innerHTML = `
                    <table class="standings-table">
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Team</th>
                                <th>Record</th>
                                <th>PF</th>
                                <th>PA</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${standings.map((team, index) => `
                                <tr>
                                    <td><span class="team-rank">${index + 1}</span></td>
                                    <td>${team.teamName}</td>
                                    <td>${team.record}</td>
                                    <td>${team.pointsFor.toFixed(1)}</td>
                                    <td>${team.pointsAgainst.toFixed(1)}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            } catch (error) {
                document.getElementById('standingsContent').innerHTML = 
                    '<div class="error">Failed to load standings</div>';
            }
        }

        async function loadDraftCapital() {
            try {
                const tradedPicks = await sleeperAPI.getTradedPicks();
                if (!currentUserId) {
                    document.getElementById('draftCapitalContent').innerHTML = 
                        '<div>Please set your user ID</div>';
                    return;
                }

                const userPicks = tradedPicks.filter(pick => 
                    pick.owner_id === currentUserId
                );

                const draftCapitalContent = document.getElementById('draftCapitalContent');
                
                if (userPicks.length === 0) {
                    draftCapitalContent.innerHTML = '<div>No draft picks found</div>';
                    return;
                }

                draftCapitalContent.innerHTML = userPicks.map(pick => `
                    <div class="pick-item">
                        <div>
                            <div class="pick-label">${pick.season} ${getRoundName(pick.round)}</div>
                            <div class="pick-round">Pick ${pick.round}.${pick.pick || 'TBD'}</div>
                        </div>
                    </div>
                `).join('') + `
                    <div class="faab-display">
                        <div class="body-small" style="color: var(--text-secondary); margin-bottom: 4px;">FAAB Budget</div>
                        <div class="faab-amount">
                            $${league?.settings.waiver_budget || 1000} / $${league?.settings.waiver_budget || 1000}
                        </div>
                    </div>
                `;
            } catch (error) {
                document.getElementById('draftCapitalContent').innerHTML = 
                    '<div class="error">Failed to load draft capital</div>';
            }
        }

        function getRoundName(round) {
            const roundNames = ['', '1st', '2nd', '3rd', '4th', '5th'];
            return roundNames[round] || `${round}th` + ' Round';
        }

        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            if (seconds < 60) return 'just now';
            const minutes = Math.floor(seconds / 60);
            if (minutes < 60) return `${minutes} minute${minutes > 1 ? 's' : ''} ago`;
            const hours = Math.floor(minutes / 60);
            if (hours < 24) return `${hours} hour${hours > 1 ? 's' : ''} ago`;
            const days = Math.floor(hours / 24);
            return `${days} day${days > 1 ? 's' : ''} ago`;
        }

        function showError(message) {
            const errorContainer = document.getElementById('errorContainer');
            errorContainer.innerHTML = `<div class="error">${message}</div>`;
        }

        document.addEventListener('DOMContentLoaded', function() {
            initSidebar();
            loadTeamSelector().then(() => {
                loadDashboard();
            });
        });
    </script>
</body>
</html>

